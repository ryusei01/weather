services:
  - type: web
    name: weather-django
    env: python
    buildCommand: |
      # 日本語フォントのインストール
      apt-get update && apt-get install -y fonts-noto-cjk fonts-noto-cjk-extra
      pip install --upgrade pip setuptools wheel
      pip install -r requirements.txt
      # Matplotlibのフォントキャッシュをクリア
      rm -rf ~/.cache/matplotlib
    startCommand: gunicorn weather_project.wsgi:application --bind 0.0.0.0:$PORT --timeout 120 --workers 2
